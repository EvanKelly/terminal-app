<!DOCTYPE html>
<html>
<head>
    <title>Config Test</title>
</head>
<body>
    <h1>Config Loading Test</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        
        function log(message) {
            output.innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }
        
        log('Testing config.js loading...');
        
        // Test 1: Check if config.js is accessible
        try {
            log('Attempting to load config.js via script tag...');
            // This will only work if config.js is accessible
            if (typeof window.CONFIG !== 'undefined') {
                log('SUCCESS: window.CONFIG found');
                log('API Key: ' + (window.CONFIG.OPENAI_API_KEY ? 'Found' : 'Not found'));
            } else {
                log('FAILED: window.CONFIG not found');
            }
        } catch (e) {
            log('ERROR: ' + e.message);
        }
        
        // Test 2: Try fetch
        log('Attempting to fetch config.js...');
        fetch('./config.js')
            .then(response => {
                log('Fetch response status: ' + response.status);
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error('HTTP ' + response.status);
                }
            })
            .then(text => {
                log('SUCCESS: Fetched config.js content');
                log('Content length: ' + text.length + ' characters');
                const match = text.match(/OPENAI_API_KEY:\s*['"`]([^'"`]+)['"`]/);
                if (match) {
                    log('SUCCESS: Found API key in content');
                } else {
                    log('WARNING: No API key found in content');
                }
            })
            .catch(error => {
                log('ERROR: Fetch failed - ' + error.message);
            });
        
        // Test 3: Check file protocol
        log('Current protocol: ' + window.location.protocol);
        log('Current URL: ' + window.location.href);
    </script>
    
    <script src="config.js"></script>
</body>
</html>
